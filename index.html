<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="styles/keyPopUp.css" />
    <link rel="stylesheet" href="styles/autocomplete.css" />

    <style>
      #keyPopUp__apply:disabled {
        background-color: gray;
        cursor: not-allowed;
      }
    </style>

    <script type="module">
      import bigMath from "/script/largeNumberLibrary/largeNumberLibrary.js";
      import autocomplete from "/script/lookupTables/autocomplete.js";

      document.addEventListener("DOMContentLoaded", function () {
        let auto1 = autocomplete();
        auto1.init("myInput1");

        let auto2 = autocomplete();
        auto2.init("myInput2");

        let auto3 = autocomplete();
        auto3.init("myInput3");

        let inputs = [
          document.getElementById("myInput1"),
          document.getElementById("myInput2"),
          document.getElementById("myInput3"),
          document.getElementById("pin"),
        ];
        let applyButton = document.getElementById("keyPopUp__apply");

        function checkInputs() {
          let allFilled = inputs.every((input) => input.value.trim() !== "");
          applyButton.disabled = !allFilled;
        }

        inputs.forEach((input) => {
          input.addEventListener("input", checkInputs);
        });

        // Initialize button state
        checkInputs();
      });
    </script>

    <!-- Include Quill -->
    <link
      href="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.snow.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.min.js"></script>
  </head>

  <body>
    <div class="keyPopUp">
      <button
        id="keyPopUp__close"
        class="keyPopUp__close"
        onclick="document.querySelector('.keyPopUp').style.display = 'none'"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="feather feather-x"
        >
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>

      <div class="keyPopUp__container">
        <h2>Key Pop Up</h2>

        <div class="input-container">
          <form autocomplete="false">
            <label class="stacked-input"
              >Key #1 :<input
                id="myInput1"
                autocomplete="off"
                placeholder="Search1..."
            /></label>
            <label class="stacked-input"
              >Key #2 :<input
                id="myInput2"
                autocomplete="off"
                placeholder="Search2..."
            /></label>
            <label class="stacked-input"
              >Key #3 :<input
                id="myInput3"
                autocomplete="off"
                placeholder="Search3..."
            /></label>
            <label class="stacked-input"
              >Pin # :<input
                placeholder="00000"
                pattern="[0-9]{5}"
                id="pin"
                max="5"
                maxlength="5"
                type="number"
                placeholder="5 digit PIN"
                onKeyPress="if(this.value.length>=5) return false;"
              />
            </label>
          </form>
        </div>
      </div>

      <button
        id="keyPopUp__apply"
        class="keyPopUp__apply"
        disabled
        onclick="document.querySelector('.keyPopUp').style.display = 'none'"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="feather feather-check"
        >
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
        Apply
      </button>
    </div>

    <!-- Include a Quill editor -->
    <div id="editor">
      <p>Hello World!</p>
      <p>Some initial <strong>bold</strong> text</p>
      <p><br /></p>
    </div>
    <button id="save" onclick="save()">Save</button>
    <button id="load" onclick="load()">Load</button>

    <script>
      function save() {
        let el = document.getElementById("editor").querySelector(".ql-editor");
        console.log(el.innerHTML);
      }
      function load() {
        let el = document.getElementById("editor");
        let editor = el.querySelector(".ql-editor");
        editor.innerHTML = `Hello my name is mike!`;
      }

      var quill = new Quill("#editor", {
        theme: "snow",
        modules: {
          toolbar: [
            [{ header: [1, 2, false] }],
            ["bold", "italic", "underline"],
            ["code-block"],
            [{ list: "ordered" }, { list: "bullet" }],
            ["link", "image"],
          ],
        },
      });
    </script>
  </body>
</html>
